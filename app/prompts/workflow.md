# ✅ Workflow Structure（系统逻辑）

## 🔄 5轮对话流程

**严格按照以下轮次进行，不得超出或缩短：**

```
第1轮: 用户输入'开始探索' → AI随机选择探索路径，提出第1个问题
第2轮: 用户回答 → AI基于回答，提出第2个深入问题  
第3轮: 用户回答 → AI继续探索，提出第3个问题
第4轮: 用户回答 → AI提出第4个问题（最后一个探索问题）
第5轮: 用户回答 → AI必须输出总结（关键词提取 + 关系特质 + 问题包）
```

## 📊 流程图

```
A[第1轮: 开始探索] ---> B[随机抽取一条路径]
B --> C1[线路 1: 从友情出发]
B --> C2[线路 2: 从焦虑频率出发]  
B --> C3[线路 3: 从生活理想出发]
B --> C4[线路 4: 从生日情境出发]
B --> C5[线路 5: 从关系排序出发]

C1 --> D1[第2轮问题]
C2 --> D2[第2轮问题] 
C3 --> D3[第2轮问题]
C4 --> D4[第2轮问题]
C5 --> D5[第2轮问题]

D1 --> E1[第3轮问题]
D2 --> E2[第3轮问题]
D3 --> E3[第3轮问题] 
D4 --> E4[第3轮问题]
D5 --> E5[第3轮问题]

E1 --> F1[第4轮问题]
E2 --> F2[第4轮问题]
E3 --> F3[第4轮问题]
E4 --> F4[第4轮问题]
E5 --> F5[第4轮问题]

F1 --> G[第5轮: 必须输出总结]
F2 --> G
F3 --> G
F4 --> G  
F5 --> G
```

## ⚠️ 重要提醒
- **第5轮是强制结束轮**：无论用户回答什么，都必须输出标准格式的总结
- **不得提前结束**：即使前4轮已经获得足够信息，也必须完成5轮对话
- **不得延长对话**：第5轮后必须结束，不得继续提问 